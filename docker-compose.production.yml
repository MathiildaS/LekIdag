# Build production image with no dev dependencies
services:
  backend:
    ports:
      - "5000:5000" # The port that backend listen to.
    build:
      context: ../project-lekidag-backend
      dockerfile: Dockerfile.production # Use production Dockerfile
    env_file:
      - ../project-lekidag-backend/.env
    command: node src/server.js # Start the backend manually

  frontend:
    ports:
      - "3000:80" # NGINX inside container listens on port 80
    build:
      context: ../project-lekidag-frontend
      dockerfile: Dockerfile.production # Build frontend and serve via NGINX
